# SX9 Smart Crate Manifest
# RFC-9101 Compliant + RFC-9302 Nonagon Analytic Node

[smart-crate]
name = "sx9-forge"
version = "7.3.1"
edition = "2021"
foundation = "sx9-foundation-core"
smart_crate_version = "1.2.0"
classification = "forge"
tesla_grade = true

[smart_meta]
description = "SX9 Forge - Dynamic tool generation with GLAF graph, Nonagon workflow, and Mission Load Sets"
domains = ["forge", "glaf", "mission-load", "nonagon", "layer2"]
capabilities = ["tool-generation", "graph-storage", "ringbus", "unicode-triggers", "mission-loads"]
xsd_schemas = ["mission-load.xsd", "nonagon-cell.xsd", "tool-chain.xsd"]
unicode_operators = true

[integration]
gold_disk_compatible = true
neural_mux_enabled = true
hash_engine_integrated = true
unicode_assembly_support = true
ring_bus_enabled = true
layer2_fabric_node = true
l2_execution = true
glaf_core_integrated = true
nonagon_analytics = true
mission_load_iap = true

[metadata]
ctas_version = "7.3.1"
sx9_version = "7.3.1"
smart_crate_type = "forge"
original_crate = true
tesla_grade = true
nonagon_validated = true
teth_entropy_threshold = 2.5
validated_entropy = 3.9232

[ports]
main = 18350
graph_api = 18351
tool_gen = 18352
port_manager = 18104

[port_manager]
endpoint = "http://localhost:18104"
crystal_gated = true
mirror_ports = false

[semantic_lock]
enabled = true
lock_file = "smart-crate.lock"
auto_update = false
verify_on_build = true

[semantic_lock.hashes]
content_hash_algorithm = "murmur3-128"
interface_hash_algorithm = "murmur3-128"
dependency_hash_algorithm = "murmur3-128"

[deployment.docker]
base_image = "sx9-foundation-core:gold-disk"
multi_stage = true
layer_caching = true
security_scanning = true

[ring_bus]
node_id = 9  # Forge node on ring
ring_direction = "bidirectional"
token_arbitration = true
max_hops = 16
heartbeat_interval_ms = 100

[ring_bus.layer2]
unicode_triggers_enabled = true
kali_iso_endpoint = "http://localhost:18200"
trigger_latency_target_us = 10
ebpf_program_path = "/opt/sx9/forge/tool_gen.bpf"

[ring_bus.tool_generation]
dynamic_tool_creation = true
glaf_graph_enabled = true
mission_load_catalog = "/opt/sx9/forge/mission_loads.toml"
ossec_rules_path = "/opt/sx9/forge/ossec_toml_rules/"

[nonagon]
# RFC-9302 Validated Configuration
vertices = 9
trivariates = ["alpha", "beta", "gamma"]
delta_precision = 0.000001
min_entropy = 2.5
validated = true

[nonagon.alpha]
# Semantic trivariate
x_context = { min = 0.0, max = 1.0, default = 0.5 }
y_meaning = { min = 0.0, max = 1.0, default = 0.6 }
z_intent = { min = 0.0, max = 1.0, default = 0.5 }

[nonagon.beta]
# Operational trivariate
x_phase = { min = 0.0, max = 1.0, hd4_mapped = true }
y_intensity = { min = 0.0, max = 1.0, default = 0.01 }
z_duration = { min = 0.0, max = 1.0, default = 0.5 }

[nonagon.gamma]
# Temporal trivariate
x_historical = { min = 0.0, max = 1.0, default = 0.5 }
y_current = { min = 0.0, max = 1.0, default = 0.505 }
z_predictive = { min = 0.0, max = 1.0, default = 0.6 }

[mission_load]
# In-app purchase configuration
catalog_enabled = true
free_tier = ["hunt_basic", "detect_basic"]
commercial_tier = ["hunt_premium", "detect_premium", "disrupt_professional"]
enterprise_tier = ["disable_enterprise", "dominate_restricted"]

[mission_load.hd4]
# HD4 Kill Chain phases
phases = ["HUNT", "DETECT", "DISRUPT", "DISABLE", "DOMINATE"]
phase_to_beta_x = { HUNT = 0.2, DETECT = 0.4, DISRUPT = 0.6, DISABLE = 0.8, DOMINATE = 1.0 }

[glaf_graph]
# Neo4j-like graph storage
storage_backend = "sled"
graph_engine = "petgraph"
teth_entropy_enabled = true
hmm_phase_detection = true
convergence_monitoring = true

[endpoints]
health = "/health"
metrics = "/metrics"
status = "/smart-crate/status"
graph = "/graph"
tools = "/tools"
mission_loads = "/mission-loads"
nonagon = "/nonagon"

[features]
default = ["full"]
full = ["graph", "mission-load", "tool-gen", "ringbus", "nonagon"]
graph = ["sx9-glaf-core"]
mission-load = []
tool-gen = []
ringbus = ["sx9-ringbus-core"]
nonagon = []
