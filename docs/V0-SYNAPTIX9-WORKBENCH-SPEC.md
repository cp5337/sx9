# SYNAPTIX9 Data Analytics Workbench - Full Specification

## What This Actually Is

The "workbench" is not a new systemâ€”it's **the UI surface for the SX9 cognitive engine you've already built**. Everything below already exists in Rust crates and running daemons. This spec defines how to expose it.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    WHAT YOU'VE ALREADY BUILT                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  DATA SUBSTRATE (Storage) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â€¢ Supabase     â†’ Relational, auth, real-time                               â”‚
â”‚  â€¢ SurrealDB    â†’ Multi-model, graph, documents                             â”‚
â”‚  â€¢ Sled         â†’ Embedded KV, fast local state                             â”‚
â”‚  â€¢ Sledis       â†’ Redis-compatible caching                                  â”‚
â”‚  â€¢ NATS         â†’ Pub/sub, JetStream persistence                            â”‚
â”‚                                                                              â”‚
â”‚  COGNITIVE LAYER (Processing) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â€¢ Trivariate Hashing    â†’ SCH/CUID/UUID identity (64-bit Base96 each)     â”‚
â”‚  â€¢ Nonagon Geometry      â†’ 9-aspect fusion nodes                            â”‚
â”‚  â€¢ Nine Realms           â†’ Domain physics spaces                            â”‚
â”‚  â€¢ Crystal Lattices      â†’ Polycrystal resonance/damping                    â”‚
â”‚  â€¢ HD4 Phases            â†’ Hunt/Detect/Disable/Disrupt/Dominate             â”‚
â”‚  â€¢ Escalation Logic      â†’ Bernoulli zones, thresholds                      â”‚
â”‚                                                                              â”‚
â”‚  ORCHESTRATION (Control) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â€¢ sx9-atlas-bus         â†’ Rust IPC backbone (sub-10ns latency)             â”‚
â”‚  â€¢ SDT Gate              â†’ Software-Defined Thyristor control               â”‚
â”‚  â€¢ Forge Engine          â†’ Workflow execution                               â”‚
â”‚  â€¢ Agent Framework       â†’ Autonomous entities (apecs ECS)                  â”‚
â”‚  â€¢ TETH Toolchains       â†’ Tool resonance/harmonics                         â”‚
â”‚                                                                              â”‚
â”‚  WHAT'S MISSING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â€¢ Unified API surface   â†’ REST/WS gateway to the engine                    â”‚
â”‚  â€¢ High-powered UI       â†’ This spec â† YOU ARE HERE                         â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## UI Overview

The workbench surfaces the SX9 engine through:
- **Graph Visualization** exposing SurrealDB + Trivariate identity
- **Multi-Database Horizon Tabs** reflecting real connection state
- **Forge Workflow Canvas** visualizing sx9-atlas-bus orchestration
- **Query/CLI Mode** for direct database + LLM interaction
- **Glyph Panel System** for compact cognitive tool access

---

## Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SYNAPTIX9 WORKBENCH                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€ LEFT RAIL (42px collapsed) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â—€ â”‚ Glyphs (10px font, vertical)                                     â”‚   â”‚
â”‚  â”‚   â”‚ â”Œâ”€â”€â”€â”                                                            â”‚   â”‚
â”‚  â”‚   â”‚ â”‚ â¬¡ â”‚ Graph                                                      â”‚   â”‚
â”‚  â”‚   â”‚ â”‚ âš¡ â”‚ Forge (Workflows)                                          â”‚   â”‚
â”‚  â”‚   â”‚ â”‚ ğŸ” â”‚ Query                                                      â”‚   â”‚
â”‚  â”‚   â”‚ â”‚ ğŸ”— â”‚ Connections                                                â”‚   â”‚
â”‚  â”‚   â”‚ â”‚ âš™ï¸ â”‚ Settings                                                   â”‚   â”‚
â”‚  â”‚   â”‚ â””â”€â”€â”€â”˜                                                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€ HORIZON TABS (Database Context) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [â—Supabase] [â—SurrealDB] [â—Sled] [â—‹Sledis] [â—NATS] [â—Fusion]        â”‚   â”‚
â”‚  â”‚  #3ecf8e     #ff00a0     #ff6b35  #666      #4222ff  #00ffff         â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â”‚  â— = connected (bright)                                              â”‚   â”‚
â”‚  â”‚  â—‹ = disconnected (dim)                                              â”‚   â”‚
â”‚  â”‚  â— = partial/syncing (pulse)                                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€ MAIN CANVAS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â”‚                    << CONTEXT-AWARE CONTENT >>                       â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â”‚   Graph Mode: D3 force simulation with fusion nodes                  â”‚   â”‚
â”‚  â”‚   Forge Mode: React Flow workflow canvas                             â”‚   â”‚
â”‚  â”‚   Query Mode: Split view (canvas + 3 prompt panes)                   â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€ QUERY/CLI PANES (Query Mode Only) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚   â”‚
â”‚  â”‚ â”‚ PANE 1          â”‚ â”‚ PANE 2          â”‚ â”‚ PANE 3          â”‚          â”‚   â”‚
â”‚  â”‚ â”‚ SQL/SurrealQL   â”‚ â”‚ LLM Prompt      â”‚ â”‚ Results/REPL    â”‚          â”‚   â”‚
â”‚  â”‚ â”‚                 â”‚ â”‚                 â”‚ â”‚                 â”‚          â”‚   â”‚
â”‚  â”‚ â”‚ SELECT * FROM   â”‚ â”‚ Analyze the     â”‚ â”‚ > 42 rows       â”‚          â”‚   â”‚
â”‚  â”‚ â”‚ agents WHERE... â”‚ â”‚ threat pattern  â”‚ â”‚ > latency: 3ms  â”‚          â”‚   â”‚
â”‚  â”‚ â”‚                 â”‚ â”‚ in this graph...â”‚ â”‚ > âœ“ cached      â”‚          â”‚   â”‚
â”‚  â”‚ â”‚ [â–¶ Run]         â”‚ â”‚ [â–¶ Ask]         â”‚ â”‚                 â”‚          â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€ STATUS BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â— 5 DBs â”‚ âš¡ 3 workflows â”‚ ğŸ”„ Last sync: 2s â”‚ ğŸ“Š 1.2k nodes â”‚ ğŸ”’ TLS â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## UI â†” SX9 Engine Mapping

Every UI component maps directly to existing SX9 infrastructure:

| UI Component | SX9 Backend | What It Exposes |
|--------------|-------------|-----------------|
| **Horizon Tabs** | NATS health subjects | Real-time connection state from `sx9.health.*` |
| **Graph Canvas** | SurrealDB + GLAF | Graph queries via `SELECT * FROM entity FETCH edges` |
| **Fusion Nodes** | Trivariate Hash | Cross-DB correlation via SCH/CUID/SX9-UUID matching |
| **Forge Canvas** | sx9-atlas-bus | Workflow state from PlasmaState + SDT gate |
| **Query Pane 1** | Database drivers | Direct SQL/SurrealQL/Sled commands |
| **Query Pane 2** | LLM via TETH | Tool-augmented generation with resonance |
| **Query Pane 3** | NATS JetStream | Real-time results + command history |
| **Status Bar** | sx9-atlas-bus metrics | Bus latency, ring fill, SDT state |
| **Crystal Badge** | Polycrystal | Current resonance strength + delta class |

### API Surface Required

The UI needs a single WebSocket gateway to the SX9 engine:

```rust
// sx9-gateway/src/ws.rs - THE ONLY NEW CODE NEEDED
pub enum WsMessage {
    // Database operations
    Query { db: Database, query: String },
    Subscribe { db: Database, table: String },
    
    // Graph operations  
    GetGraph { filter: GraphFilter },
    GetFusionNodes { threshold: f32 },
    
    // Workflow operations
    GetWorkflows,
    StartWorkflow { id: WorkflowId },
    GetPlasmaState,
    
    // Health
    GetConnections,
    Ping,
}
```

Everything else already exists in the crates.

---

## The Nonagon (9-Sided Fusion Node)

The **Nonagon** is the unique SYNAPTIX9 node type representing **cross-database fusion entities**.

### What is Fusion?

When data from multiple databases correlates to the same real-world entity:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FUSION NODE CONCEPT                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   Supabase:  agent_id = "alpha-7"                                           â”‚
â”‚   SurrealDB: threat_actor:apt29                                             â”‚
â”‚   Sled:      key = "cache:alpha-7:state"                                    â”‚
â”‚                        â†“                                                     â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                â”‚
â”‚                   â”‚         â”‚                                                â”‚
â”‚                  â•±    â¬¡     â•²   â† Nonagon (9 sides for SYNAPTIX9)           â”‚
â”‚                 â”‚   FUSION   â”‚                                               â”‚
â”‚                  â•²   NODE   â•±                                                â”‚
â”‚                   â”‚         â”‚                                                â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                â”‚
â”‚                        â”‚                                                     â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚         â–¼              â–¼              â–¼                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚    â”‚Supabase â”‚   â”‚SurrealDBâ”‚   â”‚  Sled   â”‚                                  â”‚
â”‚    â”‚  Row    â”‚   â”‚ Record  â”‚   â”‚  Value  â”‚                                  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                                                              â”‚
â”‚   The Fusion Node:                                                          â”‚
â”‚   â€¢ Has a trivariate hash (SCH + CUID + SX9-UUID)                          â”‚
â”‚   â€¢ Links to source records in each database                                â”‚
â”‚   â€¢ Enables cross-database queries                                          â”‚
â”‚   â€¢ Tracks lineage across systems                                           â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Fusion Node Properties

```typescript
interface FusionNode {
  id: string;                    // SX9-UUID (immutable anchor)
  trivariateHash: string;        // triv:[SCH]_[CUID]_[SX9-UUID]
  
  // Source links (which DBs have this entity)
  sources: {
    supabase?: { table: string; id: string; lastSync: Date };
    surrealdb?: { collection: string; id: string; lastSync: Date };
    sled?: { key: string; lastSync: Date };
    sledis?: { key: string; lastSync: Date };
  };
  
  // Fusion metadata
  fusionScore: number;           // 0-1, how confident is the match
  fusionMethod: 'hash' | 'semantic' | 'manual' | 'ml';
  createdAt: Date;
  lastCorrelated: Date;
  
  // Visual
  shape: 'nonagon';              // Always 9 sides
  color: '#00ffff';              // Cyan for fusion
  pulseOnUpdate: boolean;
}
```

### Fusion Detection Pipeline

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FUSION DETECTION PIPELINE                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   1. HASH MATCH                                                             â”‚
â”‚      Compare trivariate hashes across databases                             â”‚
â”‚      If SCH matches â†’ high confidence fusion                                â”‚
â”‚                                                                              â”‚
â”‚   2. SEMANTIC MATCH                                                         â”‚
â”‚      LLM analyzes entity names, descriptions                                â”‚
â”‚      "agent-alpha" â‰ˆ "Alpha Agent" â‰ˆ "apt:alpha"                           â”‚
â”‚                                                                              â”‚
â”‚   3. GRAPH STRUCTURE                                                        â”‚
â”‚      Similar relationship patterns indicate same entity                     â”‚
â”‚      (connects to same tools, same time patterns)                          â”‚
â”‚                                                                              â”‚
â”‚   4. TEMPORAL CORRELATION                                                   â”‚
â”‚      Events at same timestamps across DBs                                   â”‚
â”‚                                                                              â”‚
â”‚   5. MANUAL OVERRIDE                                                        â”‚
â”‚      User can force-fuse or split nodes                                     â”‚
â”‚                                                                              â”‚
â”‚   Result: Fusion Node created with sources[] populated                      â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Node Shape System

| Label | Shape | Sides | Color | Icon | Description |
|-------|-------|-------|-------|------|-------------|
| **Fusion** | Nonagon | 9 | #00ffff | Layers | Cross-database entity |
| Agent | Hexagon | 6 | #00ffff | Bot | Autonomous agent |
| Slot | Octagon | 8 | #ff00ff | Grid3x3 | Execution slot |
| Tool | Diamond | 4 | #ffbf00 | Wrench | Security tool |
| Hash | Heptagon | 7 | #00ff88 | Hash | Trivariate hash |
| Workflow | Pentagon | 5 | #ea4b71 | Workflow | Forge workflow |
| Database | Cylinder | - | #888888 | Database | DB reference |
| Service | Rounded | - | #448888 | Server | Service node |

### SVG Shape Generation

```typescript
function generatePolygon(sides: number, size: number, rotation: number = 0): string {
  const points: string[] = [];
  const angleStep = (2 * Math.PI) / sides;
  const startAngle = rotation * (Math.PI / 180) - Math.PI / 2;
  
  for (let i = 0; i < sides; i++) {
    const angle = startAngle + i * angleStep;
    const x = size / 2 + (size / 2) * Math.cos(angle);
    const y = size / 2 + (size / 2) * Math.sin(angle);
    points.push(`${x},${y}`);
  }
  
  return `M ${points.join(' L ')} Z`;
}

// Nonagon for Fusion nodes
const NONAGON_PATH = generatePolygon(9, 48, 0);
```

---

## Glyph Panel System

The left rail uses a **glyph-based navigation** with minimal footprint:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         GLYPH PANEL STATES                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   COLLAPSED (42px)              EXPANDED (240px)                            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚ â—€  â”‚ â† chevron              â”‚ â–¶  SYNAPTIX9                   â”‚          â”‚
â”‚   â”œâ”€â”€â”€â”€â”¤                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚   â”‚ â¬¡  â”‚                        â”‚ â¬¡  Graph Browser               â”‚          â”‚
â”‚   â”‚ âš¡ â”‚                        â”‚ âš¡ Forge Workflows              â”‚          â”‚
â”‚   â”‚ ğŸ” â”‚                        â”‚ ğŸ” Query / CLI                  â”‚          â”‚
â”‚   â”‚ ğŸ”— â”‚                        â”‚ ğŸ”— Connections                  â”‚          â”‚
â”‚   â”‚ âš™ï¸ â”‚                        â”‚ âš™ï¸ Settings                     â”‚          â”‚
â”‚   â”œâ”€â”€â”€â”€â”¤                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚   â”‚    â”‚                        â”‚ LABELS                         â”‚          â”‚
â”‚   â”‚    â”‚                        â”‚ â˜‘ Agent (42)                   â”‚          â”‚
â”‚   â”‚    â”‚                        â”‚ â˜‘ Slot (16)                    â”‚          â”‚
â”‚   â”‚    â”‚                        â”‚ â˜‘ Fusion (7)                   â”‚          â”‚
â”‚   â”‚    â”‚                        â”‚ â˜ Tool (23)                    â”‚          â”‚
â”‚   â”‚    â”‚                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚   â”‚    â”‚                        â”‚ RELATIONSHIPS                  â”‚          â”‚
â”‚   â”‚    â”‚                        â”‚ â˜‘ ALLOCATED_TO                 â”‚          â”‚
â”‚   â”‚    â”‚                        â”‚ â˜‘ FUSED_WITH                   â”‚          â”‚
â”‚   â”‚    â”‚                        â”‚ â˜ EXECUTES                     â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                              â”‚
â”‚   Font: 10px for glyphs, 11px for labels when expanded                      â”‚
â”‚   Transition: 200ms ease-out                                                â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Horizon Tabs (Database Context)

The horizon tabs set the **active database context** for all operations:

```typescript
interface DatabaseTab {
  id: string;
  name: string;
  type: 'supabase' | 'surrealdb' | 'sled' | 'sledis' | 'nats' | 'fusion';
  status: 'connected' | 'disconnected' | 'syncing' | 'error';
  color: string;
  port: number;
  lastPing: Date;
  latencyMs: number;
}

const DATABASE_TABS: DatabaseTab[] = [
  { id: 'supabase', name: 'Supabase', type: 'supabase', color: '#3ecf8e', port: 18000 },
  { id: 'surrealdb', name: 'SurrealDB', type: 'surrealdb', color: '#ff00a0', port: 18019 },
  { id: 'sled', name: 'Sled', type: 'sled', color: '#ff6b35', port: 18400 },
  { id: 'sledis', name: 'Sledis', type: 'sledis', color: '#ff9500', port: 18401 },
  { id: 'nats', name: 'NATS', type: 'nats', color: '#4222ff', port: 18020 },
  { id: 'fusion', name: 'Fusion', type: 'fusion', color: '#00ffff', port: 0 }, // virtual
];
```

### Status Indicators

```css
/* Tab status styling */
.tab-connected { 
  background: var(--db-color); 
  opacity: 1; 
}
.tab-disconnected { 
  background: var(--db-color); 
  opacity: 0.3; 
}
.tab-syncing { 
  background: var(--db-color); 
  animation: pulse 1s infinite; 
}
.tab-error { 
  background: #ff4444; 
  animation: blink 0.5s infinite; 
}
```

### Fusion Tab Special Behavior

When **Fusion** tab is active:
- Shows only Fusion (nonagon) nodes
- Displays cross-database relationships
- Enables fusion detection tools
- Query pane shows multi-DB query builder

---

## Query/CLI Mode

Split view with canvas above, 3 prompt panes below:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              QUERY MODE                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€ CANVAS (60% height) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â”‚   Results visualized as graph or table                               â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â”‚   â¬¡ â”€â”€â”€â”€ â¬¢ â”€â”€â”€â”€ â—‡                                                   â”‚   â”‚
â”‚  â”‚   â”‚             â”‚                                                     â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€ â¬¡ â”€â”€â”€â”€â”€â”˜                                                     â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€ PANE 1 (33%) â”€â”€â”€â”€â”€â”€â” â”Œâ”€ PANE 2 (33%) â”€â”€â”€â”€â”€â”€â” â”Œâ”€ PANE 3 (33%) â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â”Œâ”€ SQL/Query â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€ LLM Prompt â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€ Results/REPL â”€â”€â” â”‚   â”‚
â”‚  â”‚ â”‚                 â”‚ â”‚ â”‚ â”‚                 â”‚ â”‚ â”‚ â”‚                 â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ SELECT *        â”‚ â”‚ â”‚ â”‚ Find all agents â”‚ â”‚ â”‚ â”‚ 42 rows         â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ FROM agents     â”‚ â”‚ â”‚ â”‚ that connect to â”‚ â”‚ â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ WHERE status    â”‚ â”‚ â”‚ â”‚ compromised     â”‚ â”‚ â”‚ â”‚ id  | name | st â”‚ â”‚   â”‚
â”‚  â”‚ â”‚   = 'ACTIVE'    â”‚ â”‚ â”‚ â”‚ infrastructure  â”‚ â”‚ â”‚ â”‚ 1   | Alpha| AC â”‚ â”‚   â”‚
â”‚  â”‚ â”‚                 â”‚ â”‚ â”‚ â”‚ and suggest     â”‚ â”‚ â”‚ â”‚ 2   | Beta | ID â”‚ â”‚   â”‚
â”‚  â”‚ â”‚                 â”‚ â”‚ â”‚ â”‚ interdiction    â”‚ â”‚ â”‚ â”‚ ...            â”‚ â”‚   â”‚
â”‚  â”‚ â”‚                 â”‚ â”‚ â”‚ â”‚ points.         â”‚ â”‚ â”‚ â”‚                 â”‚ â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚ [â–¶ Run] [ğŸ’¾ Save]   â”‚ â”‚ [â–¶ Ask] [ğŸ”„ Refine] â”‚ â”‚ [ğŸ“Š Graph] [ğŸ“‹ Copy]â”‚   â”‚
â”‚  â”‚ Target: [Supabaseâ–¼] â”‚ â”‚ Model: [Claudeâ–¼]   â”‚ â”‚ Format: [Tableâ–¼]   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Pane Configurations

| Pane | Purpose | Features |
|------|---------|----------|
| **Pane 1** | SQL/SurrealQL/Cypher | Syntax highlighting, auto-complete, history |
| **Pane 2** | LLM Prompt | Natural language queries, context injection |
| **Pane 3** | Results/REPL | Table view, JSON, graph viz, export |

### Cross-Pane Flow

```
User types in Pane 2: "Find threat actors connected to APT29"
                           â†“
LLM generates query â†’ appears in Pane 1: 
  "SELECT * FROM threat_actors WHERE campaign = 'APT29'"
                           â†“
User clicks [â–¶ Run] â†’ Results appear in Pane 3
                           â†“
User clicks [ğŸ“Š Graph] â†’ Results visualized in Canvas above
```

---

## Connections Page

Dedicated view for database connection management:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          DATABASE CONNECTIONS                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€ SUPABASE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â— CONNECTED                                              [Disconnect] â”‚   â”‚
â”‚  â”‚ Host: db.xxxxx.supabase.co                                           â”‚   â”‚
â”‚  â”‚ Port: 5432                          Latency: 23ms                    â”‚   â”‚
â”‚  â”‚ Tables: 47                          Rows: 1.2M                       â”‚   â”‚
â”‚  â”‚ Last sync: 2 seconds ago                                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€ SURREALDB â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â— CONNECTED                                              [Disconnect] â”‚   â”‚
â”‚  â”‚ Host: localhost:18019               Latency: 1ms                     â”‚   â”‚
â”‚  â”‚ Namespace: sx9    Database: glaf                                     â”‚   â”‚
â”‚  â”‚ Collections: 23                     Documents: 45k                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€ SLED â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â— CONNECTED                                              [Disconnect] â”‚   â”‚
â”‚  â”‚ Path: /var/sx9/sled                 Latency: 0.1ms                   â”‚   â”‚
â”‚  â”‚ Trees: 12                           Keys: 890k                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€ SLEDIS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â—‹ DISCONNECTED                                             [Connect] â”‚   â”‚
â”‚  â”‚ Host: localhost:18401                                                â”‚   â”‚
â”‚  â”‚ Status: Connection refused                                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€ NATS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â— SYNCING                                                  [Details] â”‚   â”‚
â”‚  â”‚ Host: localhost:18020               Latency: 0.5ms                   â”‚   â”‚
â”‚  â”‚ Subjects: 156                       Messages/sec: 2.3k              â”‚   â”‚
â”‚  â”‚ JetStream: Enabled                  Streams: 8                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€ + ADD CONNECTION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Type: [Select database type â–¼]                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Forge Workflow Engine (Rust-based n8n)

Unlike n8n (Node.js), our workflow engine is **Rust-native** via sx9-atlas-bus:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FORGE WORKFLOW CANVAS                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€ NODE PALETTE â”€â”€â”€â”                                                       â”‚
â”‚  â”‚ TRIGGERS         â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â”œâ”€ Webhook       â”‚     â”‚                                             â”‚   â”‚
â”‚  â”‚ â”œâ”€ Schedule      â”‚     â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚   â”‚
â”‚  â”‚ â”œâ”€ NATS Sub      â”‚     â”‚   â”‚ Webhook â”‚ â”€â”€â”€â–º â”‚ Supabaseâ”‚             â”‚   â”‚
â”‚  â”‚ â””â”€ SDT Gate      â”‚     â”‚   â”‚ Trigger â”‚      â”‚  Query  â”‚             â”‚   â”‚
â”‚  â”‚                   â”‚     â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜             â”‚   â”‚
â”‚  â”‚ DATABASES         â”‚     â”‚                         â”‚                  â”‚   â”‚
â”‚  â”‚ â”œâ”€ Supabase      â”‚     â”‚                         â–¼                  â”‚   â”‚
â”‚  â”‚ â”œâ”€ SurrealDB     â”‚     â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚   â”‚
â”‚  â”‚ â”œâ”€ Sled          â”‚     â”‚                    â”‚  Filter â”‚             â”‚   â”‚
â”‚  â”‚ â””â”€ Sledis        â”‚     â”‚                    â”‚ status= â”‚             â”‚   â”‚
â”‚  â”‚                   â”‚     â”‚                    â”‚ ACTIVE  â”‚             â”‚   â”‚
â”‚  â”‚ TRANSFORMS        â”‚     â”‚                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜             â”‚   â”‚
â”‚  â”‚ â”œâ”€ Filter        â”‚     â”‚                         â”‚                  â”‚   â”‚
â”‚  â”‚ â”œâ”€ Map           â”‚     â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚ â”œâ”€ Hash          â”‚     â”‚          â–¼              â–¼              â–¼   â”‚   â”‚
â”‚  â”‚ â””â”€ Code (WASM)   â”‚     â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚   â”‚
â”‚  â”‚                   â”‚     â”‚     â”‚ Trivar  â”‚   â”‚  NATS   â”‚   â”‚  Slack  â”‚â”‚   â”‚
â”‚  â”‚ AI/ML             â”‚     â”‚     â”‚  Hash   â”‚   â”‚ Publish â”‚   â”‚  Alert  â”‚â”‚   â”‚
â”‚  â”‚ â”œâ”€ LLM Prompt    â”‚     â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚   â”‚
â”‚  â”‚ â”œâ”€ Embedding     â”‚     â”‚                                             â”‚   â”‚
â”‚  â”‚ â””â”€ Classify      â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”‚                   â”‚                                                       â”‚
â”‚  â”‚ OUTPUTS           â”‚     [â–¶ Deploy] [ğŸ§ª Test] [ğŸ’¾ Save] [ğŸ“‹ Export]        â”‚
â”‚  â”‚ â”œâ”€ NATS Publish  â”‚                                                       â”‚
â”‚  â”‚ â”œâ”€ HTTP Request  â”‚     Execution: Rust (sx9-atlas-bus)                   â”‚
â”‚  â”‚ â””â”€ Alert         â”‚     Latency: <1ms per node                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                       â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Why Rust vs Node.js?

| Aspect | n8n (Node.js) | Forge (Rust) |
|--------|---------------|--------------|
| Latency | ~5-10ms/node | <1ms/node |
| Memory | 200MB+ | 20MB |
| Concurrency | Event loop | True parallel |
| WASM support | Limited | Native |
| SDT integration | None | Built-in |

---

## Tech Stack

```
Frontend:
  - Next.js 14 (App Router)
  - TypeScript 5.5
  - Tailwind CSS (dark only)
  - D3.js (graph)
  - React Flow (workflows)
  - shadcn/ui
  - Zustand (state)

Backend (existing):
  - sx9-atlas-bus (Rust IPC)
  - NATS JetStream
  - Supabase / SurrealDB / Sled / Sledis

Workflow Engine:
  - Rust WASM modules
  - sx9-atlas-bus command routing
  - SDT gate control
```

---

## Component Structure

```
app/
â”œâ”€â”€ layout.tsx                 # Main layout with glyph rail
â”œâ”€â”€ page.tsx                   # Default to Graph view
â”œâ”€â”€ graph/
â”‚   â””â”€â”€ page.tsx              # Graph browser
â”œâ”€â”€ forge/
â”‚   â””â”€â”€ page.tsx              # Workflow canvas
â”œâ”€â”€ query/
â”‚   â””â”€â”€ page.tsx              # Query/CLI mode
â”œâ”€â”€ connections/
â”‚   â””â”€â”€ page.tsx              # Database connections
â””â”€â”€ settings/
    â””â”€â”€ page.tsx              # Settings

components/
â”œâ”€â”€ layout/
â”‚   â”œâ”€â”€ glyph-rail.tsx        # Left navigation (42px collapsed)
â”‚   â”œâ”€â”€ horizon-tabs.tsx      # Database context tabs
â”‚   â””â”€â”€ status-bar.tsx        # Bottom status
â”œâ”€â”€ graph/
â”‚   â”œâ”€â”€ graph-canvas.tsx      # D3 force simulation
â”‚   â”œâ”€â”€ node-renderer.tsx     # Shape rendering
â”‚   â”œâ”€â”€ fusion-node.tsx       # Nonagon special handling
â”‚   â””â”€â”€ shapes/
â”‚       â”œâ”€â”€ nonagon.tsx       # 9-sided fusion
â”‚       â”œâ”€â”€ hexagon.tsx
â”‚       â”œâ”€â”€ octagon.tsx
â”‚       â””â”€â”€ ...
â”œâ”€â”€ query/
â”‚   â”œâ”€â”€ query-pane.tsx        # SQL editor
â”‚   â”œâ”€â”€ llm-pane.tsx          # LLM prompt
â”‚   â””â”€â”€ results-pane.tsx      # Output display
â”œâ”€â”€ forge/
â”‚   â”œâ”€â”€ workflow-canvas.tsx   # React Flow
â”‚   â”œâ”€â”€ node-palette.tsx      # Draggable nodes
â”‚   â””â”€â”€ execution-log.tsx     # Run history
â””â”€â”€ connections/
    â”œâ”€â”€ connection-card.tsx   # Single DB card
    â””â”€â”€ add-connection.tsx    # New connection form
```

---

## Sample Data

```typescript
const SAMPLE_NODES = [
  // Regular nodes
  { id: '1', label: 'Agent', properties: { name: 'Alpha', status: 'ACTIVE' } },
  { id: '2', label: 'Agent', properties: { name: 'Beta', status: 'IDLE' } },
  { id: '3', label: 'Slot', properties: { index: 0, status: 'READY' } },
  { id: '4', label: 'Tool', properties: { name: 'nmap', category: 'recon' } },
  
  // FUSION NODE (nonagon)
  { 
    id: 'fusion-1', 
    label: 'Fusion',
    shape: 'nonagon',
    properties: { 
      name: 'APT29-Correlation',
      trivariateHash: 'triv:7F3A_CUID_SX9UUID',
      fusionScore: 0.94,
      sources: {
        supabase: { table: 'threat_actors', id: 'ta-29' },
        surrealdb: { collection: 'apt_campaigns', id: 'apt29' },
        sled: { key: 'cache:apt29:profile' }
      }
    }
  },
];

const SAMPLE_RELATIONSHIPS = [
  { id: 'r1', type: 'ALLOCATED_TO', source: '1', target: '3' },
  { id: 'r2', type: 'EXECUTES', source: '1', target: '4' },
  // Fusion relationships
  { id: 'rf1', type: 'FUSED_FROM', source: 'fusion-1', target: '1' },
  { id: 'rf2', type: 'FUSED_FROM', source: 'fusion-1', target: '2' },
];
```

---

## Discussion Points

### 1. Fusion Detection Triggers
When should fusion detection run?
- **On insert**: Every new record checks for matches
- **On schedule**: Batch correlation every N minutes
- **On demand**: User triggers "Find Fusions" button
- **Threshold**: Only when similarity > 0.8

### 2. Nonagon Visual Treatment
The 9-sided shape is unique. Should it:
- **Glow continuously** to stand out?
- **Show source DB colors** as segments?
- **Pulse when sources update**?
- **Have a special icon** (Layers? Link? Merge?)?

### 3. Query Pane Flexibility
Should panes be:
- **Fixed 3-pane** layout?
- **Configurable** (1, 2, or 3 panes)?
- **Draggable/resizable**?
- **Tabbed** (switch between query types)?

### 4. Forge Execution Model
Workflows execute via:
- **sx9-atlas-bus** (local, <1ms)
- **NATS** (distributed, ~5ms)
- **Hybrid** (local hot path, NATS for fan-out)

### 5. Horizon Tab Behavior
When switching tabs:
- **Filter graph** to show only that DB's nodes?
- **Highlight** nodes from that DB?
- **Change query target** automatically?
- **Show DB-specific schema** in left rail?

---

## v0 Prompt (Condensed)

For the actual v0.dev prompt, I'll create a focused version that hits the key visual elements. Want me to generate that now?

